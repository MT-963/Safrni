# Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª v2 - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Safrni

## âœ… Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©

### ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

#### 1. ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ `sellers` â†’ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… Ø¥Ø¶Ø§ÙØ© `PasswordHash` Ù„Ø­ÙØ¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù…Ø´ÙØ±Ø©
- âœ… Ø¥Ø¶Ø§ÙØ© `Role` (Admin/Employee) Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
- âœ… Ø¬Ø¹Ù„ `Email` ÙØ±ÙŠØ¯ (UNIQUE)

#### 2. Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÙŠØ¯: `bookingstatus_history`
- âœ… ØªØªØ¨Ø¹ Ø¬Ù…ÙŠØ¹ ØªØºÙŠÙŠØ±Ø§Øª Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- âœ… ØªØ³Ø¬ÙŠÙ„ Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„ØªØºÙŠÙŠØ± ÙˆÙ…ØªÙ‰
- âœ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ø¶Ø§ÙØ© Ø³Ø¨Ø¨ Ø§Ù„ØªØºÙŠÙŠØ±

#### 3. Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÙŠØ¯: `booking_internal_notes`
- âœ… Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†
- âœ… Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø· (IsAdminOnly)
- âœ… Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙŠÙ†

#### 4. Ø¬Ø¯ÙˆÙ„ Ø¬Ø¯ÙŠØ¯: `booking_documents`
- âœ… Ø±ÙØ¹ ÙˆØªØ®Ø²ÙŠÙ† Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- âœ… ØªØªØ¨Ø¹ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ ÙˆÙ…ØªÙ‰
- âœ… Ø¯Ø¹Ù… Ø£Ù†ÙˆØ§Ø¹ Ù…Ù„ÙØ§Øª Ù…Ø®ØªÙ„ÙØ©

#### 5. ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬Ø¯ÙˆÙ„ `payments`
- âœ… Ø¥Ø¶Ø§ÙØ© `RateUsed` - Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- âœ… Ø¥Ø¶Ø§ÙØ© `CreatedBy` Ùˆ `UpdatedBy`
- âœ… Ø¥Ø¶Ø§ÙØ© `CreatedAt` Ùˆ `UpdatedAt`

#### 6. ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬Ø¯ÙˆÙ„ `extras`
- âœ… Ø¥Ø¶Ø§ÙØ© `CreatedBy` Ùˆ `UpdatedBy`
- âœ… Ø¥Ø¶Ø§ÙØ© `CreatedAt` Ùˆ `UpdatedAt`

#### 7. ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬Ø¯ÙˆÙ„ `bookings`
- âœ… ØªØ­ÙˆÙŠÙ„ `CreatedBy` Ùˆ `UpdatedBy` Ù…Ù† VARCHAR Ø¥Ù„Ù‰ INT
- âœ… Ø±Ø¨Ø·Ù‡Ù… Ø¨Ø¬Ø¯ÙˆÙ„ `sellers` Ø¹Ø¨Ø± Foreign Keys

---

### ğŸ”§ Ø§Ù„Ø¨Ø§ÙƒÙ†Ø¯ (ASP.NET Core)

#### Models Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- âœ… `BookingstatusHistory.cs`
- âœ… `BookingInternalNote.cs`
- âœ… `BookingDocument.cs`

#### Models Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
- âœ… `Seller.cs` - Ø¥Ø¶Ø§ÙØ© PasswordHash, Role, Ø¹Ù„Ø§Ù‚Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
- âœ… `Booking.cs` - ØªØºÙŠÙŠØ± CreatedBy/UpdatedBy Ø¥Ù„Ù‰ int
- âœ… `Payment.cs` - Ø¥Ø¶Ø§ÙØ© RateUsed, CreatedBy, UpdatedBy
- âœ… `Extra.cs` - Ø¥Ø¶Ø§ÙØ© CreatedBy, UpdatedBy

#### DTOs Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- âœ… `BookingStatusHistoryDto.cs`
- âœ… `BookingInternalNoteDto.cs`
- âœ… `BookingDocumentDto.cs`
- âœ… `LoginDto` Ùˆ `LoginResponseDto` ÙÙŠ `SellerDto.cs`

#### DTOs Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
- âœ… `SellerDto` - Ø¥Ø¶Ø§ÙØ© Role, Password
- âœ… `BookingDto` - ØªØºÙŠÙŠØ± CreatedBy/UpdatedBy
- âœ… `PaymentDto` - Ø¥Ø¶Ø§ÙØ© RateUsed, tracking fields

#### DbContext
- âœ… Ø¥Ø¶Ø§ÙØ© DbSets Ù„Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- âœ… ØªØ­Ø¯ÙŠØ« configurations Ù„Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
- âœ… Ø¥Ø¶Ø§ÙØ© Foreign Keys Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

#### Mapping
- âœ… ØªØ­Ø¯ÙŠØ« `MappingProfile.cs` Ù„Ø¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

---

### ğŸ¨ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§Ù†Ø¯ (Next.js + TypeScript)

#### Types Ø§Ù„Ù…Ø­Ø¯Ø«Ø© (`types/index.ts`)
- âœ… `Seller` - Ø¥Ø¶Ø§ÙØ© role
- âœ… `Booking` - ØªØºÙŠÙŠØ± createdBy/updatedBy Ø¥Ù„Ù‰ number
- âœ… `Payment` - Ø¥Ø¶Ø§ÙØ© rateUsed, tracking fields
- âœ… `CreateBooking`, `CreatePayment` - ØªØ­Ø¯ÙŠØ« Ø­Ø³Ø¨ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª

#### Types Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- âœ… `BookingStatusHistory` Ùˆ `CreateBookingStatusHistory`
- âœ… `BookingInternalNote` Ùˆ `CreateBookingInternalNote`
- âœ… `BookingDocument` Ùˆ `CreateBookingDocument`
- âœ… `LoginRequest` Ùˆ `LoginResponse`

---

## ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©/Ø§Ù„Ù…Ø­Ø¯Ø«Ø©

### Ø§Ù„Ø¨Ø§ÙƒÙ†Ø¯
```
safrni-api/
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Seller.cs âœï¸
â”‚   â”œâ”€â”€ Booking.cs âœï¸
â”‚   â”œâ”€â”€ Payment.cs âœï¸
â”‚   â”œâ”€â”€ Extra.cs âœï¸
â”‚   â”œâ”€â”€ BookingstatusHistory.cs âœ¨ NEW
â”‚   â”œâ”€â”€ BookingInternalNote.cs âœ¨ NEW
â”‚   â””â”€â”€ BookingDocument.cs âœ¨ NEW
â”œâ”€â”€ DTOs/
â”‚   â”œâ”€â”€ SellerDto.cs âœï¸
â”‚   â”œâ”€â”€ BookingDto.cs âœï¸
â”‚   â”œâ”€â”€ PaymentDto.cs âœï¸
â”‚   â”œâ”€â”€ BookingStatusHistoryDto.cs âœ¨ NEW
â”‚   â”œâ”€â”€ BookingInternalNoteDto.cs âœ¨ NEW
â”‚   â””â”€â”€ BookingDocumentDto.cs âœ¨ NEW
â”œâ”€â”€ Data/
â”‚   â””â”€â”€ SafrniDbContext.cs âœï¸
â”œâ”€â”€ Mapping/
â”‚   â””â”€â”€ MappingProfile.cs âœï¸
â””â”€â”€ Migrations/
    â”œâ”€â”€ database_updates_v2.sql âœ¨ NEW
    â””â”€â”€ MIGRATION_GUIDE.md âœ¨ NEW
```

### Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§Ù†Ø¯
```
safrni-dashbord/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts âœï¸
â””â”€â”€ UPDATES_V2.md âœ¨ NEW
```

---

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### 1ï¸âƒ£ ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```bash
# Ù…Ù† terminal ÙÙŠ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
cd safrni-api
mysql -u root -p safrni < Migrations/database_updates_v2.sql
```

Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… MySQL Workbench ÙˆÙ†ÙØ° Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù `database_updates_v2.sql`

### 2ï¸âƒ£ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø¯Ù…Ù†

```sql
-- Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø¯Ù…Ù†
INSERT INTO sellers (Name, Email, PasswordHash, Role, IsActive)
VALUES ('Admin', 'admin@safrni.com', '', 'Admin', 1);
```
âš ï¸ **Ù…Ù‡Ù…**: ÙŠØ¬Ø¨ ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… BCrypt

### 3ï¸âƒ£ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø§ÙƒÙ†Ø¯

```bash
cd safrni-api
dotnet build
dotnet run
```

### 4ï¸âƒ£ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§Ù†Ø¯

```bash
cd safrni-dashbord
npm install # Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ«Ø¨ÙŠØª
npm run dev
```

---

## ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

### Ø§Ù„Ø¢Ù† `sellers` Ù‡Ùˆ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:
- **Admin** â†’ ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø©
- **Employee** â†’ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø­Ø¯ÙˆØ¯Ø©

### Endpoints Ù…Ù‚ØªØ±Ø­Ø© (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹):
```
POST /api/auth/login
POST /api/auth/register (Admin only)
PUT /api/auth/change-password
GET /api/auth/me
```

---

## ğŸ“š Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©

### 1. ØªØªØ¨Ø¹ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- ÙƒÙ„ ØªØºÙŠÙŠØ± ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø¬Ø² ÙŠÙØ³Ø¬Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- Ù…Ø¹Ø±ÙØ© Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„ØªØºÙŠÙŠØ± ÙˆÙ…ØªÙ‰
- Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ø¶Ø§ÙØ© Ø³Ø¨Ø¨ Ø§Ù„ØªØºÙŠÙŠØ±

### 2. Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©
- Ù…ÙˆØ¸ÙÙŠÙ† ÙŠØ¶ÙŠÙÙˆÙ† Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·
- ØªØªØ¨Ø¹ Ù…Ù† ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© ÙˆÙ…ØªÙ‰

### 3. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
- Ø±ÙØ¹ ÙÙˆØ§ØªÙŠØ±ØŒ ØµÙˆØ±ØŒ PDFs Ù„Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- ØªØªØ¨Ø¹ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯
- Ø¯Ø¹Ù… Ø£Ù†ÙˆØ§Ø¹ Ù…Ù„ÙØ§Øª Ù…Ø®ØªÙ„ÙØ©

### 4. ØªØ«Ø¨ÙŠØª Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù
- Ø­ÙØ¸ Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø¯ÙØ¹Ø©
- Ø­ØªÙ‰ Ù„Ùˆ ØªØºÙŠØ± Ø³Ø¹Ø± Ø§Ù„Ø¹Ù…Ù„Ø©ØŒ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªØ¨Ù‚Ù‰ ØµØ­ÙŠØ­Ø©

### 5. ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- Ù…Ø¹Ø±ÙØ© Ù…Ù† Ø£Ù†Ø´Ø£ Ø§Ù„Ø­Ø¬Ø²/Ø§Ù„Ø¯ÙØ¹Ø©/Extra
- Ù…Ø¹Ø±ÙØ© Ù…Ù† Ø¹Ø¯Ù‘Ù„ Ø¢Ø®Ø± Ù…Ø±Ø©
- Audit trail ÙƒØ§Ù…Ù„

---

## âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Backup** - Ø¹Ù…Ù„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
2. **CreatedBy/UpdatedBy** - Ø§Ù„Ø¢Ù† Ø£Ø±Ù‚Ø§Ù… (IDs) ÙˆÙ„ÙŠØ³Øª Ù†ØµÙˆØµ
3. **IsActive** - ÙÙŠ Seller Ø§Ù„Ø¢Ù† Ø±Ù‚Ù… (0 Ø£Ùˆ 1) ÙˆÙ„ÙŠØ³ boolean
4. **Email Unique** - ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ emails Ù…ÙƒØ±Ø±Ø©
5. **Password Hash** - Ø§Ø³ØªØ®Ø¯Ù… BCrypt Ù„ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø³Ø±

---

## ğŸ†˜ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©:
- `safrni-api/Migrations/MIGRATION_GUIDE.md` - Ø¯Ù„ÙŠÙ„ ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- `safrni-dashbord/UPDATES_V2.md` - Ø¯Ù„ÙŠÙ„ ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙØ±ÙˆÙ†Øª Ø§Ù†Ø¯

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´Ø§ÙƒÙ„:
1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù€ logs ÙÙŠ Ø§Ù„Ø¨Ø§ÙƒÙ†Ø¯
2. ØªØ­Ù‚Ù‚ Ù…Ù† console ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
3. Ø±Ø§Ø¬Ø¹ Ù…Ù„ÙØ§Øª MIGRATION_GUIDE Ùˆ UPDATES_V2

---

## âœ¨ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

- [ ] Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
- [ ] Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
- [ ] ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¬Ø² Ù„Ø¹Ø±Ø¶:
  - ØªØ§Ø±ÙŠØ® ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø§Øª
  - Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©
  - Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Middleware Ù„Ù„Ø­Ù…Ø§ÙŠØ©
- [ ] Ø¥Ø¶Ø§ÙØ© AuthContext Ù„Ù„ÙØ±ÙˆÙ†Øª Ø§Ù†Ø¯
- [ ] Ø¥Ø¶Ø§ÙØ© Controllers Ù„Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- [ ] Ø¥Ø¶Ø§ÙØ© Services Ùˆ Repositories

---

**ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰**

